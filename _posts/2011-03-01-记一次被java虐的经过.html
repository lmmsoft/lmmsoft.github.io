---
title: 记一次被java虐的经过
date: 2011-03-01 07:40:00 +0800
layout: post
published: true
comments: true
category: 默认分类
moveForm: baidu_qing
---
<div> <p>poj3844水题，检查同于相同的数量即可，注意一下余数为零的情况，然后ans=西格玛c(2,n)</p><p>最近一直在搞java课程设计，一直在用java的ide，于是就悲剧了。。。</p><p>不停地TLE，时不时还来几次RE，于是我求助好友，看到他们c++的ac代码，和我差不多一样的，都过了。。。</p><p>import java.util.*;</p><p>public class Main {</p><p>&nbsp;&nbsp;&nbsp; public static void main(String[] args) {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //Scanner cin = new Scanner(System.in);</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Scanner cin = new Scanner(new BufferedInputStream(System.in));</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int a = cin.nextInt();<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for (int cas = 0; cas &lt; a; ++cas) {</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int mod = cin.nextInt();<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int num = cin.nextInt();</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int[] sum = new int[num];</p><p><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sum[0]=cin.nextInt()%mod;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for (int i = 1; i &lt; num; ++i) {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sum[i]=(sum[i-1]+cin.nextInt())%mod;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int[] count =new int[mod];<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; count[0]=1;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;int ans = 0;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for (int i = 0; i &lt; sum.length; i++) {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ans+=count[sum[i]];<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; count[sum[i]]++;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.out.println(ans);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p><p>&nbsp;&nbsp;&nbsp; }<br />}</p><p>这代码改成c++肯定过，可惜java超时了。</p><p>哎，人品不好</p><p>&nbsp;</p><p>这里转发一篇《给JAVA同学刷OJ的建议》吧，以飨后人：</p><p>&nbsp;</p><p>1. 如果时间或是空间很紧张，不要相信任何系统库。ArrayList, LinkedList, Hashtable, HashMap之类看起来很值得信任很好听的名字效率都低得可怜，不仅如此，还异常地消耗内存。这不是-O2下的vector，即便是std::map的效率都比HashMap高得多。唯一可以信赖的是数组，效率还过得去。</p><p>这里说一个小技巧，比如需要实现一个int-&gt;int的映射，可以先开一个数组，直接用mod定址，这是非常效率高的。在出现冲突时，再扔到一个HashMap里。一般来说，控制得好的话，HashMap里的总数应该不会达到总共的10%，然后整个时间和空间效率就基本可以满意了，也节约代码。</p><p>2. 语言特性和频繁地申请对象使Java不可避免地在效率上远落后于C/C++，但抛开效率，很多在C里会犯的低级错误都不会在Java里犯了，而且运行时抛出的异常有助于迅速检查代码。当测试过几个数据之后，再根据逻辑读一遍代码，就基本是通过了。通读程序很重要，有利于发现测试不易检查出的bug。</p><p>3. 如果有一个IDE将大大提高开发的效率，对于C或是C++来说，这种提高很有限，但Java的话则会很多。</p><p>4. regex效率尚可，乃一大利器，理论上说，Regional中(只要是Linux系统的Online Judge也可以)C/C++也是可以使用&lt;regex.h&gt;，但功能比java.util.regex里的少得多。</p><p>5. Java没有complex，给计算几何代码编写带来一些困难，但实现一个也不是非常困难。Math的功能尚可</p> </div>
