---
title: poj3984
date: 2010-12-04 05:50:00 +0800
layout: post
published: true
comments: true
category: acm比赛
moveForm: baidu_qing
---
<div> <p>顶嵌杯决赛第二题，简单的bfs，关键是gcc不能用stl，所以得自己写一个队列。</p><p>已注释：</p><p> </p><p></p><p>#include &lt;stdio.h&gt;<br />#include &lt;stdlib.h&gt;<br />int mm[5][5];<br />int dir[4][2]={ {0,1},{0,-1},{1,0},{-1,0}};</p><p> </p><p></p><p>typedef struct<br />{<br />int x,y;//坐标<br />int pre;//前一节点<br />}node ;</p><p>node que[10005];<br />int vs[5][5];//标记已访问</p><p><br />int judge(node a)<br />{<br />if(a.x&lt;0||a.y&lt;0||a.x&gt;=5||a.y&gt;=5)return 0; //越界返回0<br />if(mm[a.x][a.y]==1)return 0;//墙<br />return 1;<br />}</p><p><br />void dfs(node a)//这个其实是输出输出函数<br />{<br />if(a.pre==-1)return ;//结束条件（找到原点）<br />else dfs(que[a.pre]);<br />printf(&quot;(%d, %d)\n&quot;,a.x,a.y);//从第二个节点开始顺序输出，注意中间有个空格<br />}</p><p><br />int work()//广搜函数<br />{<br />int i;<br />node t1,t2;<br />memset(vs,0,sizeof(vs));//这个其实无所谓的吧<br />int sp,head;//sp队尾标志,head队首标志<br />//初始化左上角<br />que[0].x=0;<br />que[0].y=0;<br />que[0].pre=-1;<br />vs[0][0]=1;<br />head=0;<br />sp=1;<br />while(head&lt;sp)<br />{<br />&nbsp;&nbsp;  t1=que[head];//队首出队<br />&nbsp;&nbsp;  head++;//对手标记加1<br />&nbsp;&nbsp;  if(t1.x==4&amp;&amp;t1.y==4)break;//已找到，退出<br />&nbsp;&nbsp;  t2=t1;<br />&nbsp;&nbsp;  for(i=0;i&lt;4;i++)//遍历四个方向<br />&nbsp;&nbsp;  {<br />&nbsp;&nbsp;&nbsp;  t2.x+=dir[i][0];<br />&nbsp;&nbsp;&nbsp;  t2.y+=dir[i][1];<br />&nbsp;&nbsp;&nbsp;  if(judge(t2) &amp;&amp; vs[t2.x][t2.y]==0)//vs是已访问<br />&nbsp;&nbsp;&nbsp;  {<br />&nbsp;&nbsp;&nbsp;&nbsp;  t2.pre=head-1;//标记前节点（在que里的序号）<br />&nbsp;&nbsp;&nbsp;&nbsp;  que[sp++]=t2;//进队<br />&nbsp;&nbsp;&nbsp;&nbsp;  vs[t2.x][t2.y]=1;//标记已访问<br />&nbsp;&nbsp;&nbsp;  }<br />&nbsp;&nbsp;  }<br />}<br />dfs(t1);<br />return 0;<br />}<br />int main ()<br />{<br />int i,j;<br />for(i=0;i&lt;5;i++)<br />{<br />&nbsp;&nbsp;  for(j=0;j&lt;5;j++)scanf(&quot;%d&quot;,&amp;mm[i][j]);<br />&nbsp;&nbsp;<br />}<br />printf(&quot;(0, 0)\n&quot;);<br />work();<br />return 0;<br />}<br /></p> </div>
